<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šè¯­è¨€è¯­éŸ³æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }

        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }

        .test-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .test-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .test-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            min-width: 120px;
        }

        .chinese-btn { background: linear-gradient(45deg, #e74c3c, #c0392b); }
        .english-btn { background: linear-gradient(45deg, #3498db, #2980b9); }
        .thai-btn { background: linear-gradient(45deg, #f39c12, #e67e22); }
        .japanese-btn { background: linear-gradient(45deg, #9b59b6, #8e44ad); }
        .korean-btn { background: linear-gradient(45deg, #1abc9c, #16a085); }

        .test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .debug-info {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 12px;
            color: #333;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
        }

        .voice-list {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 11px;
            color: #333;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #ddd;
        }

        .notice {
            background: rgba(46, 204, 113, 0.9);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .test-buttons {
                flex-direction: column;
            }
            
            .test-btn {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ å¤šè¯­è¨€è¯­éŸ³æµ‹è¯•</h1>
        
        <div class="notice">
            ğŸ”¬ è¿™ä¸ªæµ‹è¯•å°†å¸®åŠ©æˆ‘ä»¬ç¡®å®šé—®é¢˜æ˜¯å¦ç‰¹å®šäºæ³°è¯­ï¼Œè¿˜æ˜¯å½±å“æ‰€æœ‰éä¸­æ–‡è¯­è¨€ã€‚
        </div>

        <div class="test-section">
            <h3>ğŸ“‹ ç¬¬ä¸€æ­¥ï¼šåˆ—å‡ºæ‰€æœ‰å¯ç”¨è¯­éŸ³</h3>
            <div class="test-buttons">
                <button class="test-btn chinese-btn" onclick="listAllVoices()">ğŸ“ åˆ—å‡ºæ‰€æœ‰è¯­éŸ³</button>
                <button class="test-btn english-btn" onclick="clearLogs()">ğŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—</button>
            </div>
            <div class="voice-list" id="voiceList">ç‚¹å‡»"åˆ—å‡ºæ‰€æœ‰è¯­éŸ³"æŸ¥çœ‹æ‚¨è®¾å¤‡æ”¯æŒçš„è¯­éŸ³...</div>
        </div>

        <div class="test-section">
            <h3>ğŸµ ç¬¬äºŒæ­¥ï¼šæµ‹è¯•ä¸åŒè¯­è¨€</h3>
            <div class="test-buttons">
                <button class="test-btn chinese-btn" onclick="testLanguage('zh', 'ä½ å¥½ï¼Œè¿™æ˜¯ä¸­æ–‡æµ‹è¯•')">ğŸ‡¨ğŸ‡³ ä¸­æ–‡æµ‹è¯•</button>
                <button class="test-btn english-btn" onclick="testLanguage('en', 'Hello, this is English test')">ğŸ‡ºğŸ‡¸ è‹±è¯­æµ‹è¯•</button>
                <button class="test-btn thai-btn" onclick="testLanguage('th', 'à¸ªà¸§à¸±à¸ªà¸”à¸µ')">ğŸ‡¹ğŸ‡­ æ³°è¯­æµ‹è¯•</button>
                <button class="test-btn japanese-btn" onclick="testLanguage('ja', 'ã“ã‚“ã«ã¡ã¯')">ğŸ‡¯ğŸ‡µ æ—¥è¯­æµ‹è¯•</button>
                <button class="test-btn korean-btn" onclick="testLanguage('ko', 'ì•ˆë…•í•˜ì„¸ìš”')">ğŸ‡°ğŸ‡· éŸ©è¯­æµ‹è¯•</button>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ”§ ç¬¬ä¸‰æ­¥ï¼šå¼ºåˆ¶æŒ‡å®šè¯­éŸ³æµ‹è¯•</h3>
            <div class="test-buttons">
                <button class="test-btn english-btn" onclick="testWithSpecificVoice('en', 'Hello World')">ğŸ¯ å¼ºåˆ¶è‹±è¯­è¯­éŸ³</button>
                <button class="test-btn thai-btn" onclick="testWithSpecificVoice('th', 'à¸ªà¸§à¸±à¸ªà¸”à¸µ')">ğŸ¯ å¼ºåˆ¶æ³°è¯­è¯­éŸ³</button>
                <button class="test-btn chinese-btn" onclick="testWithDefaultVoice('à¸ªà¸§à¸±à¸ªà¸”à¸µ')">ğŸ”§ é»˜è®¤è¯­éŸ³è¯»æ³°è¯­</button>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ“Š è°ƒè¯•ä¿¡æ¯</h3>
            <div class="debug-info" id="debugInfo">ç­‰å¾…æµ‹è¯•...</div>
        </div>
    </div>

    <script>
        let debugLog = [];
        let allVoices = [];

        // è°ƒè¯•æ—¥å¿—
        function addLog(message) {
            const timestamp = new Date().toLocaleTimeString();
            debugLog.push(`[${timestamp}] ${message}`);
            updateDebugDisplay();
        }

        function updateDebugDisplay() {
            const debugInfo = document.getElementById('debugInfo');
            debugInfo.innerHTML = debugLog.slice(-15).join('<br>');
        }

        function clearLogs() {
            debugLog = [];
            updateDebugDisplay();
            addLog('ğŸ—‘ï¸ æ—¥å¿—å·²æ¸…ç©º');
        }

        // åˆ—å‡ºæ‰€æœ‰è¯­éŸ³
        function listAllVoices() {
            addLog('ğŸ“‹ å¼€å§‹åˆ—å‡ºæ‰€æœ‰è¯­éŸ³...');
            
            function loadVoices() {
                allVoices = speechSynthesis.getVoices();
                addLog(`æ‰¾åˆ° ${allVoices.length} ä¸ªè¯­éŸ³`);
                
                if (allVoices.length === 0) {
                    addLog('âš ï¸ è¯­éŸ³åˆ—è¡¨ä¸ºç©ºï¼Œç­‰å¾…åŠ è½½...');
                    setTimeout(loadVoices, 500);
                    return;
                }
                
                displayVoices();
            }
            
            loadVoices();
            speechSynthesis.onvoiceschanged = loadVoices;
        }

        function displayVoices() {
            const voiceList = document.getElementById('voiceList');
            let html = `<strong>æ‰¾åˆ° ${allVoices.length} ä¸ªè¯­éŸ³ï¼š</strong><br><br>`;
            
            // æŒ‰è¯­è¨€åˆ†ç»„
            const languageGroups = {};
            allVoices.forEach((voice, index) => {
                const lang = voice.lang.substring(0, 2);
                if (!languageGroups[lang]) {
                    languageGroups[lang] = [];
                }
                languageGroups[lang].push({voice, index});
            });
            
            // æ˜¾ç¤ºåˆ†ç»„ç»“æœ
            Object.keys(languageGroups).sort().forEach(lang => {
                const langName = {
                    'zh': 'ğŸ‡¨ğŸ‡³ ä¸­æ–‡',
                    'en': 'ğŸ‡ºğŸ‡¸ è‹±è¯­', 
                    'th': 'ğŸ‡¹ğŸ‡­ æ³°è¯­',
                    'ja': 'ğŸ‡¯ğŸ‡µ æ—¥è¯­',
                    'ko': 'ğŸ‡°ğŸ‡· éŸ©è¯­'
                }[lang] || `ğŸŒ ${lang.toUpperCase()}`;
                
                html += `<strong>${langName}:</strong><br>`;
                languageGroups[lang].forEach(({voice, index}) => {
                    html += `&nbsp;&nbsp;${index + 1}. ${voice.name} (${voice.lang}) - ${voice.localService ? 'æœ¬åœ°' : 'è¿œç¨‹'}<br>`;
                });
                html += '<br>';
            });
            
            voiceList.innerHTML = html;
            
            // è®°å½•å…³é”®è¯­éŸ³
            const thaiVoices = allVoices.filter(v => v.lang.toLowerCase().includes('th'));
            const englishVoices = allVoices.filter(v => v.lang.toLowerCase().includes('en'));
            
            addLog(`ğŸ‡¹ğŸ‡­ æ³°è¯­è¯­éŸ³æ•°é‡: ${thaiVoices.length}`);
            addLog(`ğŸ‡ºğŸ‡¸ è‹±è¯­è¯­éŸ³æ•°é‡: ${englishVoices.length}`);
            
            if (thaiVoices.length > 0) {
                addLog(`âœ… æ³°è¯­è¯­éŸ³: ${thaiVoices[0].name}`);
            } else {
                addLog('âŒ æœªæ‰¾åˆ°æ³°è¯­è¯­éŸ³');
            }
        }

        // æµ‹è¯•æŒ‡å®šè¯­è¨€
        function testLanguage(lang, text) {
            addLog(`ğŸµ æµ‹è¯• ${lang.toUpperCase()}: ${text}`);
            
            const utterance = new SpeechSynthesisUtterance(text);
            
            // è®¾ç½®è¯­è¨€
            const langMap = {
                'zh': 'zh-CN',
                'en': 'en-US', 
                'th': 'th-TH',
                'ja': 'ja-JP',
                'ko': 'ko-KR'
            };
            utterance.lang = langMap[lang] || lang;
            
            // åŸºæœ¬è®¾ç½®
            utterance.rate = 0.8;
            utterance.pitch = 1;
            utterance.volume = 1;
            
            utterance.onstart = () => {
                addLog(`â–¶ï¸ å¼€å§‹æ’­æ”¾ ${lang.toUpperCase()}: ${text}`);
            };
            
            utterance.onend = () => {
                addLog(`âœ… æ’­æ”¾å®Œæˆ ${lang.toUpperCase()}: ${text}`);
            };
            
            utterance.onerror = (e) => {
                addLog(`âŒ æ’­æ”¾å¤±è´¥ ${lang.toUpperCase()}: ${text} - ${e.error}`);
            };
            
            try {
                speechSynthesis.speak(utterance);
            } catch (error) {
                addLog(`âŒ æ’­æ”¾å¼‚å¸¸ ${lang.toUpperCase()}: ${error.message}`);
            }
        }

        // å¼ºåˆ¶æŒ‡å®šè¯­éŸ³æµ‹è¯•
        function testWithSpecificVoice(lang, text) {
            addLog(`ğŸ¯ å¼ºåˆ¶æŒ‡å®š ${lang.toUpperCase()} è¯­éŸ³æµ‹è¯•: ${text}`);
            
            const utterance = new SpeechSynthesisUtterance(text);
            
            // æŸ¥æ‰¾å¯¹åº”è¯­è¨€çš„è¯­éŸ³
            const targetVoices = allVoices.filter(v => v.lang.toLowerCase().includes(lang));
            
            if (targetVoices.length > 0) {
                utterance.voice = targetVoices[0];
                addLog(`ğŸ¯ ä½¿ç”¨è¯­éŸ³: ${targetVoices[0].name} (${targetVoices[0].lang})`);
            } else {
                addLog(`âš ï¸ æœªæ‰¾åˆ° ${lang.toUpperCase()} è¯­éŸ³ï¼Œä½¿ç”¨é»˜è®¤`);
            }
            
            utterance.lang = lang === 'en' ? 'en-US' : 'th-TH';
            utterance.rate = 0.8;
            utterance.pitch = 1;
            utterance.volume = 1;
            
            utterance.onstart = () => {
                addLog(`â–¶ï¸ å¼ºåˆ¶è¯­éŸ³å¼€å§‹æ’­æ”¾: ${text}`);
            };
            
            utterance.onend = () => {
                addLog(`âœ… å¼ºåˆ¶è¯­éŸ³æ’­æ”¾å®Œæˆ: ${text}`);
            };
            
            utterance.onerror = (e) => {
                addLog(`âŒ å¼ºåˆ¶è¯­éŸ³æ’­æ”¾å¤±è´¥: ${text} - ${e.error}`);
            };
            
            try {
                speechSynthesis.speak(utterance);
            } catch (error) {
                addLog(`âŒ å¼ºåˆ¶è¯­éŸ³æ’­æ”¾å¼‚å¸¸: ${error.message}`);
            }
        }

        // é»˜è®¤è¯­éŸ³è¯»æ³°è¯­
        function testWithDefaultVoice(text) {
            addLog(`ğŸ”§ ä½¿ç”¨é»˜è®¤è¯­éŸ³è¯»æ³°è¯­: ${text}`);
            
            const utterance = new SpeechSynthesisUtterance(text);
            // ä¸è®¾ç½®ä»»ä½•è¯­éŸ³å’Œè¯­è¨€ï¼Œå®Œå…¨ä½¿ç”¨é»˜è®¤
            
            utterance.rate = 0.8;
            utterance.pitch = 1;
            utterance.volume = 1;
            
            utterance.onstart = () => {
                addLog(`â–¶ï¸ é»˜è®¤è¯­éŸ³å¼€å§‹æ’­æ”¾: ${text}`);
            };
            
            utterance.onend = () => {
                addLog(`âœ… é»˜è®¤è¯­éŸ³æ’­æ”¾å®Œæˆ: ${text}`);
            };
            
            utterance.onerror = (e) => {
                addLog(`âŒ é»˜è®¤è¯­éŸ³æ’­æ”¾å¤±è´¥: ${text} - ${e.error}`);
            };
            
            try {
                speechSynthesis.speak(utterance);
            } catch (error) {
                addLog(`âŒ é»˜è®¤è¯­éŸ³æ’­æ”¾å¼‚å¸¸: ${error.message}`);
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            addLog('ğŸŒ å¤šè¯­è¨€è¯­éŸ³æµ‹è¯•ç³»ç»Ÿå·²å¯åŠ¨');
            addLog('ğŸ‘† è¯·å…ˆç‚¹å‡»"åˆ—å‡ºæ‰€æœ‰è¯­éŸ³"æŸ¥çœ‹è®¾å¤‡æ”¯æŒ');
        };
    </script>
</body>
</html>