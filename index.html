<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ê≥∞ËØ≠Â≠óÊØçÂ≠¶‰π† - ÂÆåÊï¥ÁâàÂ≠óÊØçË°®</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans SC', 'Noto Sans Thai', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            background: linear-gradient(135deg, #FF6B6B, #4ECDC4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #4ECDC4;
        }
        
        .alphabet-section {
            margin-bottom: 40px;
        }
        
        .section-title {
            font-size: 1.8rem;
            color: #495057;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #4ECDC4;
        }
        
        .alphabet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .letter-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .letter-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-color: #4ECDC4;
        }
        
        .thai-letter {
            font-size: 3rem;
            font-family: 'Noto Sans Thai', sans-serif;
            color: #FF6B6B;
            margin-bottom: 10px;
        }
        
        .pronunciation {
            font-size: 1.2rem;
            color: #495057;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .english-name {
            font-size: 0.9rem;
            color: #6c757d;
            font-style: italic;
        }
        
        .vowel-section {
            background: #fff3cd;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .tone-section {
            background: #d1ecf1;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .special-section {
            background: #f8d7da;
            padding: 20px;
            border-radius: 15px;
        }
        
        .audio-btn {
            background: #4ECDC4;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 5px 15px;
            font-size: 0.8rem;
            cursor: pointer;
            margin-top: 5px;
        }
        
        .audio-btn:hover {
            background: #45B7D1;
        }
        
        .play-controls {
            background: linear-gradient(135deg, #FF6B6B, #4ECDC4);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
            color: white;
        }
        
        .play-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
            border-radius: 25px;
            padding: 12px 25px;
            font-size: 1rem;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .play-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        
        .play-btn.active {
            background: white;
            color: #FF6B6B;
        }
        
        .current-playing {
            border: 3px solid #FF6B6B !important;
            background: linear-gradient(135deg, #FF6B6B, #FF8E8E) !important;
            color: white !important;
            animation: pulse 1s infinite;
        }
        
        .current-playing .thai-letter {
            color: white !important;
        }
        
        .speed-control {
            margin-top: 15px;
        }
        
        .speed-btn {
            background: rgba(255,255,255,0.1);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 15px;
            padding: 5px 15px;
            font-size: 0.9rem;
            cursor: pointer;
            margin: 0 5px;
            transition: all 0.3s ease;
        }
        
        .speed-btn:hover, .speed-btn.active {
            background: rgba(255,255,255,0.3);
        }
        
        /* Âõ∫ÂÆöÂú®È°∂ÈÉ®ÁöÑÊéßÂà∂Èù¢Êùø */
        .fixed-controls {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 10px 20px;
            z-index: 1000;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            transition: all 0.3s ease;
        }
        
        .fixed-controls .control-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.4);
            border-radius: 20px;
            padding: 8px 16px;
            margin: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .fixed-controls .control-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        
        .fixed-controls .control-btn.active {
            background: white;
            color: #764ba2;
        }
        
        .control-btn .icon {
            margin-right: 5px;
            font-size: 1.2rem;
        }
        
        .control-status {
            color: white;
            margin: 0 10px;
            font-size: 0.9rem;
            background: rgba(0,0,0,0.2);
            padding: 5px 10px;
            border-radius: 10px;
            max-width: 300px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .toggle-controls {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #764ba2;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            opacity: 0.7;
            transition: all 0.3s ease;
        }
        
        .toggle-controls:hover {
            opacity: 1;
            transform: rotate(180deg);
        }
        
        /* Ë∞ÉÊï¥È°∂ÈÉ®Á©∫Èó¥ÔºåÈò≤Ê≠¢ÊéßÂà∂Ê†èÈÅÆÊå°ÂÜÖÂÆπ */
        body {
            padding-top: 70px;
            font-family: 'Noto Sans SC', 'Noto Sans Thai', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding-left: 20px;
            padding-right: 20px;
            padding-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .alphabet-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .thai-letter {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Âõ∫ÂÆöÁöÑÊéßÂà∂Èù¢Êùø -->
    <div class="fixed-controls" id="fixedControls">
        <button class="control-btn" id="fixedPlayAllBtn" onclick="startPlayAll()">
            <span class="icon">‚ñ∂Ô∏è</span> Êí≠ÊîæÂÖ®ÈÉ®
        </button>
        <button class="control-btn" id="fixedPlayConsonantsBtn" onclick="startPlayConsonants()">
            <span class="icon">üî§</span> Êí≠ÊîæËæÖÈü≥
        </button>
        <button class="control-btn" id="fixedPlayVowelsBtn" onclick="startPlayVowels()">
            <span class="icon">üéµ</span> Êí≠ÊîæÂÖÉÈü≥
        </button>
        <button class="control-btn" id="fixedPauseBtn" onclick="pausePlay()" style="display: none;">
            <span class="icon">‚è∏Ô∏è</span> ÊöÇÂÅú
        </button>
        <button class="control-btn" id="fixedResumeBtn" onclick="resumePlay()" style="display: none;">
            <span class="icon">‚èØÔ∏è</span> ÁªßÁª≠
        </button>
        <button class="control-btn" id="fixedStopBtn" onclick="stopPlay()" style="display: none;">
            <span class="icon">‚èπÔ∏è</span> ÂÅúÊ≠¢
        </button>
        <div class="control-status" id="fixedStatus">Ê≥∞ËØ≠Â≠óÊØçÂ≠¶‰π†</div>
    </div>
    
    <button class="toggle-controls" id="toggleControls" onclick="toggleControlPanel()">‚â°</button>
    <div class="container">
        <div class="header">
            <h1>üáπüá≠ Ê≥∞ËØ≠Â≠óÊØçÂ≠¶‰π†Â§ßÂÖ®</h1>
            <p>ÂÆåÊï¥ÁöÑÊ≥∞ËØ≠Â≠óÊØçË°®‰∏éÂèëÈü≥ÊåáÂçó</p>
        </div>
        
        <!-- ÁßªÂä®Á´ØÈü≥È¢ëÊµãËØïÂå∫ -->
        <div id="audioTest" style="display: none; background: #e8f4fd; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #b8daff; text-align: center;">
            <h3 style="color: #004085; margin-bottom: 15px;">üîä ÁßªÂä®Á´ØÈü≥È¢ëÊµãËØï</h3>
            <p>ËØ∑ÁÇπÂáª‰∏ãÈù¢ÁöÑÊåâÈíÆÊµãËØïÊÇ®ÁöÑËÆæÂ§áÊòØÂê¶ËÉΩÊ≠£Â∏∏Êí≠ÊîæÂ£∞Èü≥Ôºö</p>
            <div style="margin: 15px 0;">
                <button onclick="testMobileAudio()" style="background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; font-weight: bold; margin: 5px;">ÁÇπÂáªÊí≠ÊîæÊµãËØïÂ£∞Èü≥</button>
                <button onclick="showAudioHelp()" style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 5px; margin: 5px;">Êü•ÁúãÈü≥È¢ëÂ∏ÆÂä©</button>
            </div>
            <div id="audioTestResult" style="margin-top: 10px; font-weight: bold;"></div>
        </div>
        
        <!-- ÁßªÂä®Á´ØÈü≥È¢ëÂ∏ÆÂä© -->
        <div id="audioHelp" style="display: none; background: #d4edda; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #c3e6cb;">
            <h3 style="color: #155724; margin-bottom: 10px;">üí° Ëß£ÂÜ≥ÁßªÂä®Á´ØÂ£∞Èü≥ÈóÆÈ¢ò</h3>
            <p>Â¶ÇÊûúÊÇ®Âú®ÁßªÂä®ËÆæÂ§á‰∏äÂê¨‰∏çÂà∞Â£∞Èü≥ÔºåËØ∑Â∞ùËØï‰ª•‰∏ãÊñπÊ≥ïÔºö</p>
            <ol style="text-align: left; margin-left: 20px; margin-top: 10px;">
                <li><strong>Á°ÆËÆ§Èü≥ÈáèÔºö</strong> ËÆæÂ§áÈü≥ÈáèÂ∑≤ÂºÄÂêØ‰∏î‰∏çÊòØÈùôÈü≥Ê®°Âºè</li>
                <li><strong>Âº∫Âà∂Ëß£ÈîÅÈü≥È¢ëÔºö</strong> ÁÇπÂáª‚ÄúÁÇπÂáªÊí≠ÊîæÊµãËØïÂ£∞Èü≥‚ÄùÊåâÈíÆÂ§öÊ¨°</li>
                <li><strong>ÂàáÊç¢ÊµèËßàÂô®Ôºö</strong> Â∞ùËØï‰ΩøÁî®SafariÔºàiOSÔºâÊàñÂÖ∂‰ªñÊµèËßàÂô®</li>
                <li><strong>ÊµèËßàÂô®ËÆæÁΩÆÔºö</strong> Á°Æ‰øùÂ∑≤ÊéàÊùÉÊµèËßàÂô®‰ΩøÁî®Èü≥È¢ë
                    <ul style="margin-left: 15px; margin-top: 5px;">
                        <li>Chrome: ÁÇπÂáªÂú∞ÂùÄÊ†èÈîÅÂõæÊ†á ‚Üí ÁΩëÁ´ôËÆæÁΩÆ ‚Üí Â£∞Èü≥ ‚Üí ÂÖÅËÆ∏</li>
                        <li>Safari: ËÆæÁΩÆ ‚Üí Safari ‚Üí ÁΩëÁ´ôËÆæÁΩÆ ‚Üí ÂÖÅËÆ∏ÊâÄÊúâÁΩëÁ´ôÊí≠ÊîæÂ£∞Èü≥</li>
                    </ul>
                </li>
                <li><strong>‰ΩøÁî®Â§ñÁΩÆÊâ¨Â£∞Âô®ÊàñËÄ≥Êú∫Ôºö</strong> ÊúâÊó∂ÂÄôËÆæÂ§áÊäÄÊúØÈôêÂà∂‰ºöÂΩ±ÂìçÊâ¨Â£∞Âô®Êí≠Êîæ</li>
            </ol>
            <button onclick="document.getElementById('audioHelp').style.display='none';" style="background: #155724; color: white; border: none; padding: 8px 15px; border-radius: 5px; margin-top: 10px; cursor: pointer;">ÂÖ≥Èó≠Â∏ÆÂä©</button>
        </div>
        
        <!-- ÁßªÂä®Á´ØÊèêÁ§∫ -->
        <div id="mobileTip" style="display: none; background: #fff3cd; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #ffeeba;">
            <h3 style="color: #856404; margin-bottom: 10px;">üì± ÁßªÂä®Á´Ø‰ΩøÁî®ÊèêÁ§∫</h3>
            <p>Ê£ÄÊµãÂà∞ÊÇ®Ê≠£Âú®‰ΩøÁî®ÁßªÂä®ËÆæÂ§áÊµèËßà„ÄÇ</p>
            <p style="margin-top: 10px;"><strong>Â¶Ç‰ΩïÂê¨Âà∞ÂèëÈü≥Ôºö</strong></p>
            <ol style="margin-left: 20px; margin-top: 5px;">
                <li>ËØ∑ÂÖàÁÇπÂáª<span style="color:red;">‰∏äÊñπÁöÑÊµãËØïÂ£∞Èü≥ÊåâÈíÆ</span>ÊøÄÊ¥ªÈü≥È¢ëÊùÉÈôê</li>
                <li>ÁÑ∂ÂêéÁÇπÂáªÂ≠óÊØçÂç°Áâá‰∏äÁöÑ„Äåüîä ÂèëÈü≥„ÄçÊåâÈíÆÊµãËØï</li>
                <li>Â¶ÇÊûú‰ªçÊó†Â£∞Èü≥ÔºåËØ∑ÁÇπÂáª„ÄåÊü•ÁúãÈü≥È¢ëÂ∏ÆÂä©„Äç</li>
            </ol>
            <button onclick="forceUnlockAudio();" style="background: #856404; color: white; border: none; padding: 8px 15px; border-radius: 5px; margin-top: 10px; cursor: pointer;">Ëß£ÈîÅÈü≥È¢ëÊùÉÈôê</button>
            <button onclick="document.getElementById('mobileTip').style.display='none';document.getElementById('audioTest').style.display='block';" style="background: #856404; color: white; border: none; padding: 8px 15px; border-radius: 5px; margin-top: 10px; margin-left: 10px; cursor: pointer;">ÊàëÁü•ÈÅì‰∫Ü</button>
        </div>
        
        <div class="summary">
            <h3>üìã Ê≥∞ËØ≠Â≠óÊØçÊÄªÁªì</h3>
            <p><strong>Ê≥∞ËØ≠ÂÖ±Êúâ 76 ‰∏™Â≠óÊØçÔºö</strong></p>
            <ul style="margin-top: 10px; margin-left: 20px;">
                <li><strong>ËæÖÈü≥Â≠óÊØçÔºö44‰∏™</strong></li>
                <li><strong>ÂÖÉÈü≥Á¨¶Âè∑Ôºö32‰∏™</strong></li>
            </ul>
            <p style="margin-top: 10px;">Ê≠§Â§ñËøòÊúâ4‰∏™Â£∞Ë∞ÉÁ¨¶Âè∑Âíå2‰∏™ÁâπÊÆäÁ¨¶Âè∑„ÄÇ</p>
        </div>
        
        <!-- Âæ™ÁéØÊí≠ÊîæÊéßÂà∂ -->
        <div class="play-controls">
            <h3>üéµ Âæ™ÁéØÊí≠ÊîæÊéßÂà∂</h3>
            <p>Ëá™Âä®Êí≠ÊîæÊâÄÊúâÂ≠óÊØçÂèëÈü≥ÔºåÂ∏ÆÂä©‰Ω†Âø´ÈÄüÁÜüÊÇâÊ≥∞ËØ≠Â≠óÊØç</p>
            <div style="margin: 20px 0;">
                <button class="play-btn" id="playAllBtn" onclick="startPlayAll()">‚ñ∂Ô∏è Êí≠ÊîæÂÖ®ÈÉ®</button>
                <button class="play-btn" id="playConsonantsBtn" onclick="startPlayConsonants()">üî§ Êí≠ÊîæËæÖÈü≥</button>
                <button class="play-btn" id="playVowelsBtn" onclick="startPlayVowels()">üéµ Êí≠ÊîæÂÖÉÈü≥</button>
                <button class="play-btn" id="pauseBtn" onclick="pausePlay()" style="display: none;">‚è∏Ô∏è ÊöÇÂÅú</button>
                <button class="play-btn" id="stopBtn" onclick="stopPlay()" style="display: none;">‚èπÔ∏è ÂÅúÊ≠¢</button>
            </div>
            <div class="speed-control">
                <span>Êí≠ÊîæÈÄüÂ∫¶Ôºö</span>
                <button class="speed-btn" onclick="setSpeed(0.5)">0.5x</button>
                <button class="speed-btn active" onclick="setSpeed(1)">1x</button>
                <button class="speed-btn" onclick="setSpeed(1.5)">1.5x</button>
                <button class="speed-btn" onclick="setSpeed(2)">2x</button>
            </div>
            <div style="margin-top: 15px; font-size: 0.9rem;">
                <span id="playStatus">ÂáÜÂ§áÊí≠Êîæ...</span>
            </div>
        </div>
        
        <!-- ËæÖÈü≥Â≠óÊØç -->
        <div class="alphabet-section">
            <h2 class="section-title">üî§ ËæÖÈü≥Â≠óÊØç (44‰∏™)</h2>
            <div class="alphabet-grid" id="consonants">
                <!-- ËæÖÈü≥Â≠óÊØçÂ∞ÜÈÄöËøáJavaScriptÁîüÊàê -->
            </div>
        </div>
        
        <!-- ÂÖÉÈü≥Á¨¶Âè∑ -->
        <div class="vowel-section">
            <h2 class="section-title">üéµ ÂÖÉÈü≥Á¨¶Âè∑ (32‰∏™)</h2>
            <div class="alphabet-grid" id="vowels">
                <!-- ÂÖÉÈü≥Á¨¶Âè∑Â∞ÜÈÄöËøáJavaScriptÁîüÊàê -->
            </div>
        </div>
        
        <!-- Â£∞Ë∞ÉÁ¨¶Âè∑ -->
        <div class="tone-section">
            <h2 class="section-title">üéº Â£∞Ë∞ÉÁ¨¶Âè∑ (4‰∏™)</h2>
            <div class="alphabet-grid" id="tones">
                <!-- Â£∞Ë∞ÉÁ¨¶Âè∑Â∞ÜÈÄöËøáJavaScriptÁîüÊàê -->
            </div>
        </div>
        
        <!-- ÁâπÊÆäÁ¨¶Âè∑ -->
        <div class="special-section">
            <h2 class="section-title">‚ú® ÁâπÊÆäÁ¨¶Âè∑ (2‰∏™)</h2>
            <div class="alphabet-grid" id="specials">
                <!-- ÁâπÊÆäÁ¨¶Âè∑Â∞ÜÈÄöËøáJavaScriptÁîüÊàê -->
            </div>
        </div>
    </div>

    <script>
        // Ê≥∞ËØ≠ËæÖÈü≥Â≠óÊØçÊï∞ÊçÆ
        const consonants = [
            {thai: '‡∏Å', pronunciation: 'g…î…î g√†i', english: 'ko kai', meaning: '(È∏°)'},
            {thai: '‡∏Ç', pronunciation: 'k…î…î k√†ai', english: 'kho khai', meaning: '(Ëõã)'},
            {thai: '‡∏É', pronunciation: 'k…î…î k√πat', english: 'kho khuat', meaning: '(Áì∂)'},
            {thai: '‡∏Ñ', pronunciation: 'k…î…î kwaai', english: 'kho khwai', meaning: '(Ê∞¥Áâõ)'},
            {thai: '‡∏Ö', pronunciation: 'k…î…î kon', english: 'kho khon', meaning: '(‰∫∫)'},
            {thai: '‡∏Ü', pronunciation: 'k…î…î r√°-kang', english: 'kho rakhang', meaning: '(Èíü)'},
            {thai: '‡∏á', pronunciation: 'ng…î…î nguu', english: 'ngo ngu', meaning: '(Ëõá)'},
            {thai: '‡∏à', pronunciation: 'j…î…î jaan', english: 'cho chan', meaning: '(ÁõòÂ≠ê)'},
            {thai: '‡∏â', pronunciation: 'ch…î…î ch√¨‡∏á', english: 'cho ching', meaning: '(Èíπ)'},
            {thai: '‡∏ä', pronunciation: 'ch…î…î ch√°ang', english: 'cho chang', meaning: '(Ë±°)'},
            {thai: '‡∏ã', pronunciation: 's…î…î s√¥o', english: 'so so', meaning: '(ÈìæÂ≠ê)'},
            {thai: '‡∏å', pronunciation: 'ch…î…î ch…ô…ô', english: 'cho choe', meaning: '(Ê†ë)'},
            {thai: '‡∏ç', pronunciation: 'y…î…î y«êng', english: 'yo ying', meaning: '(Â•≥‰∫∫)'},
            {thai: '‡∏é', pronunciation: 'd…î…î ch√†-daa', english: 'do chada', meaning: '(ÁéãÂÜ†)'},
            {thai: '‡∏è', pronunciation: 't…î…î pa-ta√†k', english: 'to patak', meaning: '(È±ºÂèâ)'},
            {thai: '‡∏ê', pronunciation: 'th…î…î thƒÉan', english: 'tho than', meaning: '(Â∫ïÂ∫ß)'},
            {thai: '‡∏ë', pronunciation: 'th…î…î mon-thoo', english: 'tho montho', meaning: '(Â§´‰∫∫)'},
            {thai: '‡∏í', pronunciation: 'th…î…î phuu-th√¢o', english: 'tho phuthao', meaning: '(ËÄÅ‰∫∫)'},
            {thai: '‡∏ì', pronunciation: 'n…î…î neen', english: 'no nen', meaning: '(Ê≤ôÂº•)'},
            {thai: '‡∏î', pronunciation: 'd…î…î d√®k', english: 'do dek', meaning: '(Â≠©Â≠ê)'},
            {thai: '‡∏ï', pronunciation: 't…î…î tao', english: 'to tao', meaning: '(‰πåÈæü)'},
            {thai: '‡∏ñ', pronunciation: 'th…î…î th«îng', english: 'tho thung', meaning: '(Ë¢ãÂ≠ê)'},
            {thai: '‡∏ó', pronunciation: 'th…î…î tha-h«éan', english: 'tho thahan', meaning: '(Â£´ÂÖµ)'},
            {thai: '‡∏ò', pronunciation: 'th…î…î thong', english: 'tho thong', meaning: '(ÊóóÂ∏ú)'},
            {thai: '‡∏ô', pronunciation: 'n…î…î nuu', english: 'no nu', meaning: '(ËÄÅÈº†)'},
            {thai: '‡∏ö', pronunciation: 'b…î…î bai-m√°ai', english: 'bo baimai', meaning: '(Âè∂Â≠ê)'},
            {thai: '‡∏õ', pronunciation: 'p…î…î plaa', english: 'po pla', meaning: '(È±º)'},
            {thai: '‡∏ú', pronunciation: 'ph…î…î ph«îng', english: 'pho phueng', meaning: '(ËúúËúÇ)'},
            {thai: '‡∏ù', pronunciation: 'f…î…î faa', english: 'fo fa', meaning: '(ÁõñÂ≠ê)'},
            {thai: '‡∏û', pronunciation: 'ph…î…î phaan', english: 'pho phan', meaning: '(ÊâòÁõò)'},
            {thai: '‡∏ü', pronunciation: 'f…î…î fan', english: 'fo fan', meaning: '(ÁâôÈΩø)'},
            {thai: '‡∏†', pronunciation: 'ph…î…î s«ém-phao', english: 'pho samphao', meaning: '(Â∏ÜËàπ)'},
            {thai: '‡∏°', pronunciation: 'm…î…î m√°a', english: 'mo ma', meaning: '(È©¨)'},
            {thai: '‡∏¢', pronunciation: 'y…î…î y√†k', english: 'yo yak', meaning: '(Â§úÂèâ)'},
            {thai: '‡∏£', pronunciation: 'r…î…î r…Øa', english: 'ro ruea', meaning: '(Ëàπ)'},
            {thai: '‡∏•', pronunciation: 'l…î…î ling', english: 'lo ling', meaning: '(Áå¥Â≠ê)'},
            {thai: '‡∏ß', pronunciation: 'w…î…î w…õ…õn', english: 'wo waen', meaning: '(ÊàíÊåá)'},
            {thai: '‡∏®', pronunciation: 's…î…î s«éa-laa', english: 'so sala', meaning: '(Âáâ‰∫≠)'},
            {thai: '‡∏©', pronunciation: 's…î…î r…Ø…Ø-s«êi', english: 'so ruesri', meaning: '(ÈöêÂ£´)'},
            {thai: '‡∏™', pronunciation: 's…î…î s…ØÃåa', english: 'so suea', meaning: '(ËÄÅËôé)'},
            {thai: '‡∏´', pronunciation: 'h…î…î h√¨ip', english: 'ho hip', meaning: '(ÁõíÂ≠ê)'},
            {thai: '‡∏¨', pronunciation: 'l…î…î j√π-laa', english: 'lo chula', meaning: '(È£éÁ≠ù)'},
            {thai: '‡∏≠', pronunciation: '…î…î √†ang', english: 'o ang', meaning: '(ÁõÜ)'},
            {thai: '‡∏Æ', pronunciation: 'h…î…î n√≥k-h√ªuk', english: 'ho nokhuk', meaning: '(Áå´Â§¥Èπ∞)'}
        ];

        // Ê≥∞ËØ≠ÂÖÉÈü≥Á¨¶Âè∑Êï∞ÊçÆ
        const vowels = [
            {thai: '‡∏∞', pronunciation: '√†', english: 'a (short)'},
            {thai: '‡∏≤', pronunciation: 'aa', english: 'a (long)'},
            {thai: '‡∏¥', pronunciation: '√¨', english: 'i (short)'},
            {thai: '‡∏µ', pronunciation: 'ii', english: 'i (long)'},
            {thai: '‡∏∂', pronunciation: '…ØÃÄ', english: 'ue (short)'},
            {thai: '‡∏∑', pronunciation: '…Ø…Ø', english: 'ue (long)'},
            {thai: '‡∏∏', pronunciation: '√π', english: 'u (short)'},
            {thai: '‡∏π', pronunciation: 'uu', english: 'u (long)'},
            {thai: '‡πÄ', pronunciation: 'ee', english: 'e (long)'},
            {thai: '‡πÅ', pronunciation: '…õ…õ', english: 'ae (long)'},
            {thai: '‡πÇ', pronunciation: 'oo', english: 'o (long)'},
            {thai: '‡πÉ', pronunciation: 'ai', english: 'ai'},
            {thai: '‡πÑ', pronunciation: 'ai', english: 'ai'},
            {thai: '‡∏≥', pronunciation: 'am', english: 'am'},
            {thai: '‡πÄ‡∏∞', pronunciation: '√®', english: 'e (short)'},
            {thai: '‡πÅ‡∏∞', pronunciation: '…õÃÄ', english: 'ae (short)'},
            {thai: '‡πÇ‡∏∞', pronunciation: '√≤', english: 'o (short)'},
            {thai: '‡πÄ‡∏≤', pronunciation: 'ao', english: 'ao'},
            {thai: '‡∏±‡∏ß', pronunciation: 'ua', english: 'ua'},
            {thai: '‡∏ß‡∏∞', pronunciation: '√πa', english: 'ua (short)'},
            {thai: '‡πÄ‡∏≠‡∏∞', pronunciation: '√® î', english: 'oe (short)'},
            {thai: '‡πÄ‡∏≠', pronunciation: '…ô…ô', english: 'oe (long)'},
            {thai: '‡πÄ‡∏µ‡∏¢‡∏∞', pronunciation: '√¨a', english: 'ia (short)'},
            {thai: '‡πÄ‡∏µ‡∏¢', pronunciation: 'ia', english: 'ia (long)'},
            {thai: '‡πÄ‡∏∑‡∏≠‡∏∞', pronunciation: '…ØÃÄa', english: 'uea (short)'},
            {thai: '‡πÄ‡∏∑‡∏≠', pronunciation: '…Øa', english: 'uea (long)'},
            {thai: '‡∏±‡∏ß‡∏∞', pronunciation: '√πa', english: 'ua (short)'},
            {thai: '‡πÄ‡∏¥', pronunciation: '…ô…ô', english: 'oe'},
            {thai: '‡πÄ‡∏≠‡∏≤', pronunciation: 'ao', english: 'ao'},
            {thai: '‡πÑ‡∏≠', pronunciation: 'ai', english: 'ai'},
            {thai: '‡πÉ‡∏≠', pronunciation: 'ai', english: 'ai'},
            {thai: '‡πÄ‡∏≠‡∏¢', pronunciation: '…ô…ôi', english: 'oei'}
        ];

        // Â£∞Ë∞ÉÁ¨¶Âè∑Êï∞ÊçÆ
        const tones = [
            {thai: '‡πà', pronunciation: 'm√°i √®ek', english: 'mai ek (low tone)'},
            {thai: '‡πâ', pronunciation: 'm√°i thoo', english: 'mai tho (falling tone)'},
            {thai: '‡πä', pronunciation: 'm√°i trii', english: 'mai tri (high tone)'},
            {thai: '‡πã', pronunciation: 'm√°i j√†t-t√†-waa', english: 'mai chattawa (rising tone)'}
        ];

        // ÁâπÊÆäÁ¨¶Âè∑Êï∞ÊçÆ
        const specials = [
            {thai: '‡πå', pronunciation: 'gaa-ran', english: 'garan (silent letter)'},
            {thai: '‡πÜ', pronunciation: 'm√°i-y√°-m√≥k', english: 'maiyamok (repetition)'}
        ];
        
        // Âæ™ÁéØÊí≠ÊîæÁõ∏ÂÖ≥ÂèòÈáè
        let isPlaying = false;
        let isPaused = false;
        let currentPlayIndex = 0;
        let currentPlayList = [];
        let playSpeed = 1;
        let playInterval;
        let currentHighlightedCard = null;
        let isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        let audioInitialized = false;
        let audioContext = null;
        let mobileAudioUnlocked = false;
        let audioTestDone = false;
        let audioAttempts = 0;

        // ÁîüÊàêÂ≠óÊØçÂç°Áâá
        function generateLetterCard(letter) {
            return `
                <div class="letter-card" onclick="pronounce('${letter.thai}')">
                    <div class="thai-letter">${letter.thai}</div>
                    <div class="pronunciation">${letter.pronunciation}</div>
                    <div class="english-name">${letter.english}</div>
                    ${letter.meaning ? `<div class="english-name">${letter.meaning}</div>` : ''}
                    <button class="audio-btn" onclick="pronounce('${letter.thai}')">üîä ÂèëÈü≥</button>
                </div>
            `;
        }

        // È°µÈù¢Âä†ËΩΩÊó∂ÁîüÊàêÊâÄÊúâÂ≠óÊØç
        document.addEventListener('DOMContentLoaded', function() {
            // ÁîüÊàêËæÖÈü≥Â≠óÊØç
            document.getElementById('consonants').innerHTML = 
                consonants.map(generateLetterCard).join('');
            
            // ÁîüÊàêÂÖÉÈü≥Á¨¶Âè∑
            document.getElementById('vowels').innerHTML = 
                vowels.map(generateLetterCard).join('');
            
            // ÁîüÊàêÂ£∞Ë∞ÉÁ¨¶Âè∑
            document.getElementById('tones').innerHTML = 
                tones.map(generateLetterCard).join('');
            
            // ÁîüÊàêÁâπÊÆäÁ¨¶Âè∑
            document.getElementById('specials').innerHTML = 
                specials.map(generateLetterCard).join('');
                
            // Ê£ÄÊµãÁßªÂä®ËÆæÂ§áÂπ∂ÊòæÁ§∫ÊèêÁ§∫
            if (isMobile) {
                document.getElementById('mobileTip').style.display = 'block';
            }
            
            // Âú®È°µÈù¢Âä†ËΩΩÂêéÂéªÈô§ÊªöÂä®‰∫ã‰ª∂ÂØπÊéßÂà∂Èù¢ÊùøÁöÑÂΩ±Âìç
            document.getElementById('toggleControls').addEventListener('click', function() {
                const controlPanel = document.getElementById('fixedControls');
                controlPanel.style.display = controlPanel.style.display === 'none' ? 'flex' : 'none';
                this.textContent = controlPanel.style.display === 'none' ? '‚ñº' : '‚â°';
            });
            
            // Âú®È°µÈù¢‰∏äÊ∑ªÂä†ÂÖ®Â±ÄÁÇπÂáª‰∫ã‰ª∂Â§ÑÁêÜÈü≥È¢ëÂàùÂßãÂåñ
            document.addEventListener('click', function initAudioOnClick() {
                initAudio();
                document.removeEventListener('click', initAudioOnClick);
            });
        });

        // ÂàùÂßãÂåñÈü≥È¢ëÁéØÂ¢ÉÔºàËß£ÂÜ≥ÁßªÂä®Á´ØÈóÆÈ¢òÔºâ
        function initAudio() {
            // Âè™ÂàùÂßãÂåñ‰∏ÄÊ¨°
            if (audioInitialized) return;
            
            // ÂàõÂª∫Èü≥È¢ë‰∏ä‰∏ãÊñá
            if (!audioContext && window.AudioContext) {
                try {
                    audioContext = new AudioContext();
                    
                    // ÂàõÂª∫‰∏Ä‰∏™ÈùôÈü≥ÁöÑÈü≥È¢ëÊ∫êÔºåÁî®‰∫éËß£ÈîÅÁßªÂä®Á´ØÈü≥È¢ë
                    const silentBuffer = audioContext.createBuffer(1, 1, 22050);
                    const source = audioContext.createBufferSource();
                    source.buffer = silentBuffer;
                    source.connect(audioContext.destination);
                    source.start(0);
                } catch (e) {
                    console.log('ÂàùÂßãÂåñÈü≥È¢ë‰∏ä‰∏ãÊñáÂ§±Ë¥•:', e);
                }
            }
            
            // Â¶ÇÊûúÊîØÊåÅËØ≠Èü≥ÂêàÊàêÔºåËß£ÈîÅÂÆÉ
            if ('speechSynthesis' in window) {
                try {
                    // Áõ¥Êé•Êí≠Êîæ‰∏Ä‰∏™ÁÆÄÁü≠ÁöÑÂ£∞Èü≥Ëß£ÈîÅËØ≠Èü≥ÂêàÊàê
                    const unlock = new SpeechSynthesisUtterance('„Äê„Äë');
                    unlock.volume = 0.1;
                    unlock.rate = 0.1;
                    speechSynthesis.speak(unlock);
                    
                    // Â∞ùËØïËøõ‰∏ÄÊ≠•Ëß£ÈîÅ
                    setTimeout(() => {
                        speechSynthesis.cancel(); // Ê∏ÖÁêÜËØ≠Èü≥ÈòüÂàó
                        const unblock = new SpeechSynthesisUtterance('‡∏Å');
                        unblock.lang = 'th-TH';
                        unblock.volume = 0.2;
                        speechSynthesis.speak(unblock);
                    }, 500);
                } catch (e) {
                    console.log('Ëß£ÈîÅËØ≠Èü≥ÂêàÊàêÂ§±Ë¥•:', e);
                }
            }
            
            audioInitialized = true;
            
            // Âú®ÁßªÂä®Á´ØÊòæÁ§∫ÊèêÁ§∫
            if (isMobile) {
                document.getElementById('mobileTip').innerHTML += '<p style="color: green; margin-top: 10px;">Èü≥È¢ëÂ∑≤ÂàùÂßãÂåñÔºÅÁÇπÂáª‰ªªÊÑèÂ≠óÊØçÁöÑÂèëÈü≥ÊåâÈíÆÊµãËØï„ÄÇ</p>';
            }
        }
        
        // ÂèëÈü≥ÂäüËÉΩ
        function pronounce(letter, autoNext = false) {
            // Á°Æ‰øùÈü≥È¢ëÂ∑≤ÂàùÂßãÂåñ
            if (!audioInitialized) {
                initAudio();
            }
            
            // ÁîµËÑëËá™Âä®Êí≠ÊîæÊàñÂçï‰∏™Â≠óÊØçÁÇπÂáªÊí≠Êîæ
            if ('speechSynthesis' in window) {
                try {
                    // ÂÅúÊ≠¢ÂΩìÂâçÊí≠Êîæ
                    speechSynthesis.cancel();
                    
                    // Â¶ÇÊûúÊòØÁßªÂä®Á´ØËá™Âä®Êí≠ÊîæÊ®°ÂºèÔºåË∑≥ËøáÂèëÂ£∞
                    if (isMobile && autoNext && isPlaying) {
                        // Êõ¥Êñ∞Áä∂ÊÄÅÔºå‰ΩÜ‰∏çÊí≠ÊîæÂ£∞Èü≥
                        updatePlayStatus(`Ê≠£Âú®Â≠¶‰π†: ${letter}`);
                        if (isPlaying) {
                            setTimeout(() => {
                                playNext();
                            }, 800 / playSpeed);
                        }
                        return;
                    }
                    
                    // ÊâãÂä®ÁÇπÂáªÊàñÁîµËÑëËá™Âä®Êí≠Êîæ
                    const utterance = new SpeechSynthesisUtterance(letter);
                    utterance.lang = 'th-TH';
                    utterance.rate = 0.7 * playSpeed;
                    utterance.volume = 1.0; // ÊúÄÂ§ßÈü≥Èáè
                    
                    // Êí≠ÊîæÁªìÊùüÂêéÁöÑÂõûË∞É
                    utterance.onend = function() {
                        if (autoNext && isPlaying) {
                            setTimeout(() => {
                                playNext();
                            }, 500 / playSpeed);
                        }
                    };
                    
                    // Êí≠ÊîæÈîôËØØÂ§ÑÁêÜ
                    utterance.onerror = function(event) {
                        console.log('ËØ≠Èü≥ÂêàÊàêÈîôËØØ:', event);
                        if (autoNext && isPlaying) {
                            setTimeout(() => {
                                playNext();
                            }, 500 / playSpeed);
                        }
                    };
                    
                    // Áõ¥Êé•Êí≠Êîæ
                    speechSynthesis.speak(utterance);
                    
                } catch (e) {
                    console.log('ËØ≠Èü≥ÂêàÊàêÂºÇÂ∏∏:', e);
                    // ÈîôËØØ‰πüË¶ÅÁªßÁª≠Ëá™Âä®Êí≠Êîæ
                    if (autoNext && isPlaying) {
                        setTimeout(() => {
                            playNext();
                        }, 800 / playSpeed);
                    }
                }
            } else {
                // ÈôçÁ∫ßÂ§ÑÁêÜ
                console.log('ÊµèËßàÂô®‰∏çÊîØÊåÅËØ≠Èü≥ÂêàÊàê');
                if (autoNext && isPlaying) {
                    setTimeout(() => {
                        playNext();
                    }, 800 / playSpeed);
                }
            }
        }
        
        // ÂºÄÂßãÊí≠ÊîæÊâÄÊúâÂ≠óÊØç
        function startPlayAll() {
            currentPlayList = [...consonants, ...vowels, ...tones, ...specials];
            startPlay('Êí≠ÊîæÂÖ®ÈÉ®Â≠óÊØç');
        }
        
        // ÂºÄÂßãÊí≠ÊîæËæÖÈü≥
        function startPlayConsonants() {
            currentPlayList = consonants;
            startPlay('Êí≠ÊîæËæÖÈü≥Â≠óÊØç');
        }
        
        // ÂºÄÂßãÊí≠ÊîæÂÖÉÈü≥
        function startPlayVowels() {
            currentPlayList = [...vowels, ...tones, ...specials];
            startPlay('Êí≠ÊîæÂÖÉÈü≥Á¨¶Âè∑');
        }
        
        // ÂºÄÂßãÊí≠Êîæ
        function startPlay(statusText) {
            if (currentPlayList.length === 0) return;
            
            // ÂàùÂßãÂåñÈü≥È¢ë
            initAudio();
            
            isPlaying = true;
            isPaused = false;
            currentPlayIndex = 0;
            
            // Êõ¥Êñ∞UI
            updatePlayButtons(true);
            updatePlayStatus(statusText);
            
            // ÊèêÁ§∫ÁßªÂä®Áî®Êà∑
            if (isMobile) {
                updatePlayStatus(statusText + ' (ÁßªÂä®Á´ØÈùôÈü≥Ê®°Âºè)');
            }
            
            // ÂºÄÂßãÊí≠ÊîæÁ¨¨‰∏Ä‰∏™
            playCurrentLetter();
        }
        
        // Êí≠ÊîæÂΩìÂâçÂ≠óÊØç
        function playCurrentLetter() {
            if (!isPlaying || currentPlayIndex >= currentPlayList.length) {
                stopPlay();
                return;
            }
            
            const currentLetter = currentPlayList[currentPlayIndex];
            
            // È´ò‰∫ÆÂΩìÂâçÊí≠ÊîæÁöÑÂ≠óÊØç
            highlightCurrentLetter(currentLetter.thai);
            
            // Êõ¥Êñ∞Áä∂ÊÄÅ
            updatePlayStatus(`Ê≠£Âú®Êí≠Êîæ: ${currentLetter.thai} (${currentPlayIndex + 1}/${currentPlayList.length})`);
            
            // Êí≠ÊîæÂèëÈü≥
            pronounce(currentLetter.thai, true);
        }
        
        // Êí≠Êîæ‰∏ã‰∏Ä‰∏™
        function playNext() {
            if (!isPlaying) return;
            
            currentPlayIndex++;
            playCurrentLetter();
        }
        
        // ÊöÇÂÅúÊí≠Êîæ
        function pausePlay() {
            if (!isPlaying) return;
            
            isPlaying = false;
            isPaused = true;
            speechSynthesis.cancel();
            updatePlayButtons(false, true);
            updatePlayStatus('Êí≠ÊîæÂ∑≤ÊöÇÂÅú');
        }
        
        // ÁªßÁª≠Êí≠Êîæ
        function resumePlay() {
            if (!isPaused) return;
            
            isPlaying = true;
            isPaused = false;
            updatePlayButtons(true);
            updatePlayStatus('ÁªßÁª≠Êí≠Êîæ');
            playCurrentLetter();
        }
        
        // ÂÅúÊ≠¢Êí≠Êîæ
        function stopPlay() {
            isPlaying = false;
            isPaused = false;
            speechSynthesis.cancel();
            currentPlayIndex = 0;
            
            // Ê∏ÖÈô§È´ò‰∫Æ
            if (currentHighlightedCard) {
                currentHighlightedCard.classList.remove('current-playing');
                currentHighlightedCard = null;
            }
            
            updatePlayButtons(false);
            updatePlayStatus('Êí≠ÊîæÂ∑≤ÂÅúÊ≠¢');
        }
        
        // ËÆæÁΩÆÊí≠ÊîæÈÄüÂ∫¶
        function setSpeed(speed) {
            playSpeed = speed;
            
            // Êõ¥Êñ∞ÈÄüÂ∫¶ÊåâÈíÆÁä∂ÊÄÅ
            document.querySelectorAll('.speed-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            updatePlayStatus(`Êí≠ÊîæÈÄüÂ∫¶ËÆæÁΩÆ‰∏∫ ${speed}x`);
        }
        
        // È´ò‰∫ÆÂΩìÂâçÊí≠ÊîæÁöÑÂ≠óÊØç
        function highlightCurrentLetter(letter) {
            // Ê∏ÖÈô§‰πãÂâçÁöÑÈ´ò‰∫Æ
            if (currentHighlightedCard) {
                currentHighlightedCard.classList.remove('current-playing');
            }
            
            // ÊâæÂà∞ÂΩìÂâçÂ≠óÊØçÁöÑÂç°ÁâáÂπ∂È´ò‰∫Æ
            const cards = document.querySelectorAll('.letter-card');
            cards.forEach(card => {
                const thaiLetter = card.querySelector('.thai-letter');
                if (thaiLetter && thaiLetter.textContent === letter) {
                    card.classList.add('current-playing');
                    currentHighlightedCard = card;
                    
                    // ËÆ°ÁÆóÂç°Áâá‰ΩçÁΩÆÔºåÁïôÂá∫ÊéßÂà∂Ê†èÁöÑÁ©∫Èó¥
                    const controlsHeight = document.getElementById('fixedControls').offsetHeight;
                    const cardPosition = card.getBoundingClientRect();
                    const offset = 30; // Ê∑ªÂä†È¢ùÂ§ñÁ©∫Èó¥
                    
                    // Â¶ÇÊûúÂç°ÁâáÂú®ÂèØËßÜÂå∫ÂüüÂÜÖÔºå‰∏çÈúÄË¶ÅÊªöÂä®
                    if (cardPosition.top < controlsHeight + offset || 
                        cardPosition.bottom > window.innerHeight - offset) {
                        // ‰ªÖÂΩìÂç°Áâá‰∏çÂèØËßÅÊó∂ÊâçÊªöÂä®
                        window.scrollTo({
                            top: window.pageYOffset + cardPosition.top - controlsHeight - offset,
                            behavior: 'smooth'
                        });
                    }
                }
            });
        }
        
        // Êõ¥Êñ∞Êí≠ÊîæÊåâÈíÆÁä∂ÊÄÅ
        function updatePlayButtons(playing, paused = false) {
            const playBtns = ['playAllBtn', 'playConsonantsBtn', 'playVowelsBtn', 'fixedPlayAllBtn', 'fixedPlayConsonantsBtn', 'fixedPlayVowelsBtn'];
            const pauseBtns = ['pauseBtn', 'fixedPauseBtn'];
            const resumeBtns = ['fixedResumeBtn'];
            const stopBtns = ['stopBtn', 'fixedStopBtn'];
            
            // Êí≠ÊîæÊåâÈíÆ
            playBtns.forEach(id => {
                const btn = document.getElementById(id);
                if (btn) {
                    btn.style.display = playing ? 'none' : 'inline-block';
                    btn.classList.remove('active');
                }
            });
            
            // ÊöÇÂÅúÊåâÈíÆ
            pauseBtns.forEach(id => {
                const btn = document.getElementById(id);
                if (btn) {
                    btn.style.display = (playing && !paused) ? 'inline-block' : 'none';
                }
            });
            
            // ÁªßÁª≠ÊåâÈíÆ
            resumeBtns.forEach(id => {
                const btn = document.getElementById(id);
                if (btn) {
                    btn.style.display = paused ? 'inline-block' : 'none';
                }
            });
            
            // ÂÅúÊ≠¢ÊåâÈíÆ
            stopBtns.forEach(id => {
                const btn = document.getElementById(id);
                if (btn) {
                    btn.style.display = (playing || paused) ? 'inline-block' : 'none';
                }
            });
        }
        
        // Êõ¥Êñ∞Êí≠ÊîæÁä∂ÊÄÅÊñáÊú¨
        function updatePlayStatus(text) {
            const statusElement = document.getElementById('playStatus');
            if (statusElement) {
                statusElement.textContent = text;
            }
            
            // ÂêåÊó∂Êõ¥Êñ∞Âõ∫ÂÆöÊéßÂà∂Ê†èÁä∂ÊÄÅ
            const fixedStatusElement = document.getElementById('fixedStatus');
            if (fixedStatusElement) {
                fixedStatusElement.textContent = text;
            }
        }
        
        // ÊòæÁ§∫/ÈöêËóèÊéßÂà∂Èù¢Êùø
        function toggleControlPanel() {
            const controlPanel = document.getElementById('fixedControls');
            if (controlPanel.style.display === 'none') {
                controlPanel.style.display = 'flex';
            } else {
                controlPanel.style.display = 'none';
            }
            
            const toggleBtn = document.getElementById('toggleControls');
            toggleBtn.textContent = controlPanel.style.display === 'none' ? '‚ñº' : '‚â°';
        }

        // Ê∑ªÂä†ÊêúÁ¥¢ÂäüËÉΩ
        function searchLetter() {
            const searchTerm = document.getElementById('search').value.toLowerCase();
            const cards = document.querySelectorAll('.letter-card');
            
            cards.forEach(card => {
                const text = card.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }
        
        // Âº∫Âà∂Ëß£ÈîÅÁßªÂä®Á´ØÈü≥È¢ë
        function forceUnlockAudio() {
            audioAttempts++;
            
            // ‰ªéÂ§¥ÂºÄÂßãÂàùÂßãÂåñÈü≥È¢ë
            audioInitialized = false;
            initAudio();
            
            // Â∞ùËØïÊí≠Êîæ‰∏ÄÊÆµÁÆÄÁü≠Â£∞Èü≥
            playTestSound();
            
            // Êõ¥Êñ∞ÊåâÈíÆÊñáÊú¨
            const unlockBtn = document.querySelector('button[onclick="forceUnlockAudio();"]');
            if (unlockBtn) {
                unlockBtn.textContent = `Ëß£ÈîÅÈü≥È¢ëÊùÉÈôê (Â∑≤Â∞ùËØï${audioAttempts}Ê¨°)`;
            }
            
            // ÊòæÁ§∫ÊµãËØïÂå∫Âüü
            document.getElementById('audioTest').style.display = 'block';
        }

        // ÊµãËØïÁßªÂä®Á´ØÈü≥È¢ë
        function testMobileAudio() {
            if (!audioInitialized) {
                initAudio();
            }
            
            // Êõ¥Êñ∞ÊµãËØïÊ¨°Êï∞
            audioAttempts++;
            
            // Êí≠ÊîæÊµãËØïÂ£∞Èü≥
            playTestSound();
            
            // Êõ¥Êñ∞ÊµãËØïÂå∫Âüü
            const resultDiv = document.getElementById('audioTestResult');
            resultDiv.innerHTML = `Ê≠£Âú®ÊµãËØï... Â∑≤Â∞ùËØï${audioAttempts}Ê¨°<br>Â¶ÇÊûúÂê¨Âà∞Â£∞Èü≥ÔºåËØ∑ÁÇπÂáª‰∏ãÈù¢ÁöÑÊåâÈíÆÔºö`;
            resultDiv.innerHTML += `<br><button onclick="audioTestSuccess()" style="background: #28a745; color: white; border: none; padding: 8px 15px; border-radius: 5px; margin: 5px; cursor: pointer;">‚úÖ ÊàëÂê¨Âà∞Â£∞Èü≥‰∫Ü</button>`;
            resultDiv.innerHTML += `<button onclick="audioTestFailed()" style="background: #dc3545; color: white; border: none; padding: 8px 15px; border-radius: 5px; margin: 5px; cursor: pointer;">‚ùå Ê≤°Âê¨Âà∞Â£∞Èü≥</button>`;
        }

        // Êí≠ÊîæÊµãËØïÂ£∞Èü≥
        function playTestSound() {
            // ‰ΩøÁî®Â§öÁßçÊñπÊ≥ïÂ∞ùËØïÊí≠ÊîæÂ£∞Èü≥
            
            // 1. Â∞ùËØï‰ΩøÁî®Ê†áÂáÜHTML5 Audio
            try {
                const audio = new Audio();
                audio.src = 'data:audio/mp3;base64,/+MYxAAAAANIAAAAAExBTUUzLjk4LjIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';
                audio.volume = 1.0;
                audio.play().then(() => {
                    console.log('Ê†áÂáÜÈü≥È¢ëÊí≠ÊîæÊàêÂäü');
                    mobileAudioUnlocked = true;
                }).catch(e => {
                    console.log('Ê†áÂáÜÈü≥È¢ëÊí≠ÊîæÂ§±Ë¥•:', e);
                });
            } catch (e) {
                console.log('Ê†áÂáÜÈü≥È¢ëÊí≠ÊîæÂºÇÂ∏∏:', e);
            }
            
            // 2. Â∞ùËØï‰ΩøÁî®ËØ≠Èü≥ÂêàÊàêAPI
            if ('speechSynthesis' in window) {
                try {
                    // ÂÅúÊ≠¢ÂΩìÂâçÊí≠Êîæ
                    speechSynthesis.cancel();
                    
                    // ÂÖàÂ∞ùËØïËã±ÊñáÂèëÈü≥ÔºàÊõ¥ÂÆπÊòìÂ∑•‰ΩúÔºâ
                    const utterance1 = new SpeechSynthesisUtterance('Test sound');
                    utterance1.volume = 1.0;
                    utterance1.rate = 1.0;
                    utterance1.pitch = 1.0;
                    speechSynthesis.speak(utterance1);
                    
                    // ÂÜçÂ∞ùËØïÊ≥∞ËØ≠ÂèëÈü≥
                    setTimeout(() => {
                        const utterance2 = new SpeechSynthesisUtterance('‡∏Å ‡∏Ç ‡∏Ñ');
                        utterance2.lang = 'th-TH';
                        utterance2.volume = 1.0;
                        utterance2.rate = 0.8;
                        speechSynthesis.speak(utterance2);
                    }, 1000);
                } catch (e) {
                    console.log('ËØ≠Èü≥ÂêàÊàêÂºÇÂ∏∏:', e);
                }
            }
            
            // 3. Â∞ùËØï‰ΩøÁî®Web Audio API
            if (audioContext) {
                try {
                    // ÂàõÂª∫‰∏Ä‰∏™ÈúáËç°Âô®
                    const oscillator = audioContext.createOscillator();
                    oscillator.type = 'sine';
                    oscillator.frequency.setValueAtTime(440, audioContext.currentTime); // A4 Èü≥È´ò
                    
                    // ÂàõÂª∫Èü≥ÈáèËäÇÁÇπ
                    const gainNode = audioContext.createGain();
                    gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                    
                    // ËøûÊé•ËäÇÁÇπ
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    // Êí≠Êîæ‰∏ÄÂ∞èÊÆµÊó∂Èó¥
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.5);
                } catch (e) {
                    console.log('Web Audio APIÂºÇÂ∏∏:', e);
                }
            }
        }

        // Èü≥È¢ëÊµãËØïÊàêÂäü
        function audioTestSuccess() {
            mobileAudioUnlocked = true;
            audioTestDone = true;
            document.getElementById('audioTestResult').innerHTML = 
                `<div style="color: green; font-weight: bold;">ÊÅ≠ÂñúÔºÅÊÇ®ÁöÑËÆæÂ§áÂèØ‰ª•Ê≠£Â∏∏Êí≠ÊîæÂ£∞Èü≥„ÄÇ<br>Áé∞Âú®‰Ω†ÂèØ‰ª•Â∞ùËØïÁÇπÂáªÂ≠óÊØçÂç°Áâá‰∏äÁöÑ„ÄåÂèëÈü≥„ÄçÊåâÈíÆ‰∫Ü„ÄÇ</div>`;
        }

        // Èü≥È¢ëÊµãËØïÂ§±Ë¥•
        function audioTestFailed() {
            document.getElementById('audioTestResult').innerHTML = 
                `<div style="color: red; font-weight: bold;">Êä±Ê≠âÔºåÊÇ®ÁöÑËÆæÂ§áÂèØËÉΩ‰∏çÊîØÊåÅÊ≠§ÁΩëÁ´ôÁöÑÈü≥È¢ëÊí≠Êîæ„ÄÇ<br>ËØ∑Â∞ùËØï„ÄåÊü•ÁúãÈü≥È¢ëÂ∏ÆÂä©„Äç‰∏≠ÁöÑËß£ÂÜ≥ÊñπÊ≥ï„ÄÇ</div>`;
            showAudioHelp();
        }

        // ÊòæÁ§∫Èü≥È¢ëÂ∏ÆÂä©
        function showAudioHelp() {
            document.getElementById('audioHelp').style.display = 'block';
        }
    </script>
</body>
</html>


